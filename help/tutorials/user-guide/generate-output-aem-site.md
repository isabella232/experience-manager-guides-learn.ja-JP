---
title: AEM Site
description: AEMガイドでAEMサイトプリセットを作成および設定します。 記事ベースの出力、出力リンクトピックの生成、conref の公開、コンテンツ内の文字列の検索には、AEMサイトのサポートを使用します。
exl-id: 8523ec55-d7f3-439d-96e8-163c7632f73c
source-git-commit: 8504a0a52d381044bf1f0d6e7de3585ebecf3a7b
workflow-type: tm+mt
source-wordcount: '2569'
ht-degree: 0%

---

# AEM Site {#id205BE3008SW}

AEM Site の出力では、次のオプションを使用できます。

AEMサイトプリセットは次の 2 つの方法で作成できます。

**Web エディタから：** リポジトリパネルで、マップ表示で DITA マップファイルを開き、「出力」タブで+アイコンを選択して出力プリセットを作成し、「プリセットを追加」ダイアログの「タイプ」ドロップダウンから「AEM Site」を選択します。

**一般**

The **一般** 「 」タブには、次の設定が含まれます。

- サイト名
- 出力パス
- 既存の出力ページ
- 孤立したサイトページを削除
- \（マップに対して条件が定義されている場合\）を使用して条件を適用
- ベースラインを使用\（マップのベースラインが作成された場合\）
- 生成後のワークフロー

**詳細**

「詳細設定」タブには、次の設定が含まれます。

- DITA-OT 一時ファイルの消去
- トピックごとに別のPDFを生成
- マップのプロパティをデフォルトとして使用

詳しくは、 [AEM Site 設定](#id231KIM004X1).

**マップダッシュボードから**

AEM Site の出力プリセットを開くには、Assets UI で DITA マップファイルをクリックし、「出力プリセット」をクリックしてから、「AEM Site」出力オプションをクリックします。マップダッシュボードで、 **編集** 上部で様々な設定を更新し、「 **保存**.

>[!TIP]
>
> 詳しくは、 *AEM Site Publishing* AEM Site 出力の作成に関するベストプラクティスに関する節を参照してください。

## AEM Site 設定 {#id_aem_site_config}

AEM Site の出力では、次のオプションを使用できます。

| AEM Site オプション | 説明 |
| --- | --- |
| 出力タイプ | 生成する出力のタイプ。 レスポンシブAEMサイト出力を生成するには、「 AEMサイト」オプションを選択します。 |
| 設定名 | 作成するAEMサイト設定にわかりやすい名前を付けます。 例えば、次の項目を指定できます。 *社内顧客の出力* または *end-users 出力*. |
| サイト名 | 出力がAEMリポジトリに保存されるサイト名。<br><br>AEMリポジトリ内のノードが、ここで指定した名前で作成されます。 サイト名を指定しない場合、サイトノードは DITA マップファイル名で作成されます。<br><br>ここで指定したサイト名は、ブラウザータブのタイトルとしても使用されます。<br><br>また、サイト名の設定時に変数を使用することもできます。 変数の使用について詳しくは、 [変数を使用して、[ 宛先のパス ]、[ サイト名 ]、または [ ファイル名 ] オプションを設定します。](generate-output-use-variables.md#id18BUG70K05Z). |
| デザイン | 出力の生成に使用するデザインテンプレートを選択します。<br><br>カスタムデザインテンプレートを使用して出力を生成する方法について詳しくは、パブリッシュ管理者に問い合わせてください。 |
| 宛先のパス | 出力が保存されるAEMリポジトリ内のパス。 最終的な出力を生成する際に、サイト名と宛先パスが組み合わされます。 例えば、「サイト名」に `user-guide` として宛先パスを `/content/output/aem-guides`を指定した場合、最終出力は `/content/output/aem-guides/user-guide` ノード。<br><br>また、宛先パスの設定時に変数を使用することもできます。 変数の使用について詳しくは、 [変数を使用して、[ 宛先のパス ]、[ サイト名 ]、または [ ファイル名 ] オプションを設定します。](generate-output-use-variables.md#id18BUG70K05Z). |
| 次を使用して条件を適用 | 次のいずれかのオプションを選択します。<br><br>**未適用**：公開された出力に条件を適用しない場合は、このオプションを選択します。<br>**DITAVal ファイル**:「 DITAVal ファイル」を選択して、条件付きコンテンツを生成します。 複数の DITAVal ファイルを選択するには、参照ダイアログを使用するか、ファイルパスを入力します。 ファイル名の近くにあるバツ印アイコンを使用して、ファイルを削除します。 DITAVal ファイルは指定された順序で評価されるので、最初のファイルで指定された条件は、後のファイルで指定された条件よりも優先されます。 ファイルを追加または削除することで、ファイルの順序を維持できます。 DITAVal ファイルが別の場所に移動されたり、削除されたりした場合、マップダッシュボードからは自動的に削除されません。 ファイルを移動または削除した場合に備えて、場所を更新する必要があります。 ファイル名の上にマウスポインターを置くと、AEMリポジトリ内のファイルが保存されているパスが表示されます。 DITAVal ファイルのみを選択でき、他のファイルタイプを選択した場合はエラーが表示されます。<br>**条件プリセット**：ドロップダウンから条件プリセットを選択し、出力の公開時に条件を適用します。 このオプションは、DITA マップファイルに条件を追加した場合に表示されます。 条件設定は、DITA マップコンソールの「条件プリセット」タブで使用できます。 条件プリセットについて詳しくは、 [条件プリセットの使用](generate-output-use-condition-presets.md#id1825FL004PN). |
| 既存の出力ページ | を選択します。 **コンテンツを上書き** オプションを使用して、既存のページのコンテンツを上書きできます。 このオプションは、ページのコンテンツおよびヘッドノードの下に存在するコンテンツのみを上書きします。 このオプションを使用すると、コンテンツのブレンド公開が可能になります。 このオプションを選択すると、公開された出力から孤立ページを削除するオプションを選択できます。 これはまた、 *デフォルト* AEM Site 出力を作成するためのオプション。<br><br>を選択します。 **削除と作成** オプションを使用して、公開中に既存のページを強制的に削除できます。 このオプションでは、ページノードとそのコンテンツおよびその下にあるすべての子ページが削除されます。 出力プリセットのデザインテンプレートを変更した場合、または宛先に既に存在する追加のページを削除する場合は、このオプションを使用します。 |
| 孤立したサイトページを削除 | の選択 **コンテンツを上書き** （内） **既存の出力ページ** の設定は、このオプションを表します。 このオプションを選択すると、すべてのオーファンページが公開済みのAEMサイトから削除されます。 この機能を正常に実行するには、DITA マップ全体を公開し、増分公開を使用しないでください。<br><br>a.dita、b.dita および c.dita のトピックを含む DITA マップを公開したとします。 マップを再度公開する前に、マップから b.dita トピックを削除しました。 このオプションを選択した場合、b.dita に関連するすべてのコンテンツがAEM Site の出力から削除され、a.dita および c.dita のみが公開されます。<br><br>この機能は、パブリッシュされた子マップを削除しません。 例えば、親マップに子マップが含まれ、子マップ全体を削除した場合、子マップの内容はパブリッシュされた出力からは削除されません。 ただし、子マップからトピックを削除して再公開すると、削除したトピックのコンテンツはサイト出力から削除されます。<br><br>また、再公開前に参照されるコンテンツが存在し、そのコンテンツが削除されている場合は、参照されるコンテンツのデータは削除されません。<br><br>**注意**：削除されたオーファンページに関する情報は、出力生成ログにも取り込まれます。 ログファイルへのアクセスについて詳しくは、 [ログファイルを表示して確認する](generate-output-basic-troubleshooting.md#id1821I0Y0G0A__id1822G0P0CHS). |
| DITA-OT 一時ファイルの消去 | DITA-OT で生成された一時ファイルを消去するには、このオプションを選択します。 DITA-OT が一時ファイルを格納する場所は、出力生成ログに記録されます。<br><br>DITA-OT を使用して出力を生成する際にエラーが発生した場合は、このオプションを選択解除して一時ファイルを保持できます。 その後、これらのファイルを使用して、出力生成エラーのトラブルシューティングをおこなうことができます。 |
| トピックごとに別のPDFを生成 | 選択した場合、DITA マップ内のすべてのPDFに対してトピックも作成されます。 このオプションを選択すると、新しい「分割PDFのパス」オプションが表示されます。<br><br>「分割PDFのパス」フィールドで、各トピックに対して生成されたPDFを保存するパスを指定します。<br><br>**注意**:AEMガイドは、pdfx という名前の DITA-OT プラグインを使用して、各トピックのPDFを生成します。 このプラグインは、標準搭載の DITA-OT パッケージにバンドルされています。 このプラグインをカスタマイズして、必要に応じてPDFを生成できます。 カスタム DITA-OT プラグインを使用する場合は、pdfx プラグインにトピックレベルのPDF生成機能を組み込んでください。 |
| ポストジェネレーションワークフローを実行 | このオプションを選択すると、AEMで設定されたすべてのワークフローを含む、新しい生成後のワークフロードロップダウンリストが表示されます。 出力生成ワークフローの完了後に実行するワークフローを選択する必要があります。 |
| ベースラインを使用 | 選択した DITA マップのベースラインを作成した場合は、このオプションを選択して、公開するバージョンを指定します。<br><br>**重要**:AEM Site の増分出力を生成する場合、出力は、添付されたベースラインではなく、現在のバージョンのファイルを使用して作成されます。<br><br>詳しくは、 [基準計画を使用する](generate-output-use-baseline-for-publishing.md#id1825FI0J0PF) を参照してください。 |
| プロパティ | メタデータとして処理するプロパティを選択します。 これらのプロパティは、DITA マップまたはブックマップファイルのプロパティページから設定します。 ドロップダウンリストから選択したプロパティは「プロパティ」フィールドの下に一覧表示され、ドロップダウンリストから削除されます。<br><br>**注意**：メタデータプロパティでは大文字と小文字が区別されます。<br><br>*「ベースライン」(Baseline) を選択した場合、プロパティの値は、選択したベースラインのバージョンに基づきます。<br>* 「ベースライン」(Baseline) を選択していない場合、プロパティの値は最新バージョンに基づきます。<br><br>また、DITA-OT 公開を使用して、メタデータを出力に渡すこともできます。 詳しくは、を参照してください。 [DITA-OT を使用してメタデータを出力に渡します。](pass-metadata-dita-ot.md#id21BJ00QD0XA).<br><br>**注意**：を定義していない場合は、 `cq:tags` 「プロパティ」オプションで、 `cq:tags` は、公開用のベースラインを選択した場合でも、現在の作業用コピーから選択されます。 |
| トピックに見つからない場合は、マッププロパティを使用します | このオプションを選択すると、マップファイルに対して定義されたプロパティも、このようなプロパティが定義されていないトピックにコピーされます。 このオプションを使用する際は、次の点を考慮してください。<br><br>*AEM Site ページに渡すことができるのは、String、Date、または Long（単一値および複数値）プロパティのみです。<br>* String 型のプロパティのメタデータ値は、特殊文字 ( `@, #, " "`) をクリックします。<br>*このオプションは、 `Properties` オプション。 |

## AEM Site に関する追加情報

### Web エディターから記事ベースの出力を生成する

1 つ以上のトピックのAEM Site 出力または DITA マップ全体を Web エディターから生成できます。 DITA マップ用の出力プリセットを作成して、マップ用のAEM Site 出力を簡単に生成する必要があります。 マップ内のいくつかのトピックを更新した場合は、Web エディタから、それらのトピックに対してのみAEMサイトの出力を生成することもできます。 詳しくは、 [Web エディターからの記事ベースの公開](web-editor-article-publishing.md#id218CK0U019I).

### 他のマップから出力リンクトピックを生成

複数のフォルダーおよび DITA マップに大量のドキュメントセットを分散させるのは、非常に一般的なシナリオです。 様々な場所からリンクされたコンテンツを公開する場合は、非常に複雑になります。 デフォルトでは、すべてのリンク `<xref>` は `local` `@scope`. このようなトピックの公開では、トピックへの直接リンクが使用されるので、課題はありません。 トピックが現在の DITA マップの外にある場合、リンクにはリンクされたコンテンツは表示されません。

コンテンツをリンクする別の方法は、 `peer` `@scope`. このようなコンテンツの場合、DITA マップの公開コンテキストからリンクされたトピックに対して設定されたコンテキストを選択することで、実行時にリンクが解決されます。 次のスクリーンショットは、 `peer` `@scope`:

![](images/peer-link-scope-link.png){width="800" align="left"}

他のマップ内の他のトピックにリンクする複雑なマップやトピックの公開を簡単にするために、AEMガイドで各出力プリセットの公開コンテキストを設定できます。

パブリッシュのコンテキストを使用すると、特定の出力をパブリッシュするためにどのトピックを使用するかを指定できます。 例を使用して、これを理解します。例えば、サンプル a、サンプル b、サンプル c、サンプル d の 4 つのフォルダーがあるとします。各フォルダには、DITA マップ A、DITA マップ B、DITA マップ C、および DITA マップ D が含まれます。DITA マップ A のトピックが DITA マップ B、C、または D のトピックにリンクすると、クロスマップリンクが発生します。次のスクリーンショットでは、サンプルの概念トピックに、他の DITA マップの一部であるファイルへのリンク\（または参照\）が含まれています。

![](images/sample-concept-link-to-other.png){width="350" align="left"}

このトピックを含むマップファイルに対してAEM Site の公開設定を構成する際に、リンクされたコンテンツの公開コンテキストを、公開時に使用するパブリッシュコンテキストを選択できます。 公開コンテキストは、DITA マップとその出力プリセットを組み合わせたものです。 次に、出力プリセットには、コンテンツの特定のバージョンと条件付きプリセットが含まれます。 DITA マップ、出力プリセット、\(files\) バージョンおよび条件の組み合わせ全体が、リンクされたマップの公開コンテキストを定義します。

クロスリンクされたファイルの公開コンテキストを指定するには、次の手順を実行します。

1. を開きます。 **出力プリセット** 公開する DITA マップのタブ。

1. を選択します。 **AEM Site** 出力プリセット。

   「 AEMプリセットの設定」タブと「公開コンテキスト」タブが表示されます。

   ![](images/aem-site-publish-settings.png){width="800" align="left"}

1. を開きます。 **公開コンテキスト** タブをクリックします。

   依存トピックのリストが表示されます。 現在のマップの一部のトピックからリンクされたトピックですが、他の DITA マップで使用できます。

   >[!NOTE]
   >
   > 「公開コンテキスト」タブには、 `peer` `@scope` のみ。 次とのリンクの場合： `local` `@scope`に値を指定しない場合は、公開コンテキストを指定する必要はありません。

   デフォルトでは、リンクされたすべてのトピックの最新の出力プリセットとマップが選択されています。

   ![](images/default-publish-context.png){width="800" align="left"}

1. DITA マップとプリセットのデフォルト選択を変更するには、 **編集** \（メインツールバーの\）。

1. マップ内の各依存ファイルの最新のパブリッシュ済み出力を使用する場合は、 **すべての依存トピックに対して、最近生成された公開コンテキストを使用**.

1. Adobe Analytics の **親マップ** 」ドロップダウンリストから、現在のマップの出力をリンクする出力を持つマップファイルを選択します。

   マップファイルを選択すると、マップの UUID が親マップの UUID 列に表示されます。 選択したマップに関連付けられた出力プリセットが、親マップのプリセットリストに表示されます。

1. Adobe Analytics の **親マップのプリセット** 」ドロップダウンリストから、現在のマップの出力をリンクする出力プリセットを選択します。

1. すべての依存トピックに対して必要なマップとその出力プリセットを選択し、 **完了**.

   依存トピックのコンテキストが設定されました。 現在のマップの出力を生成できます。 出力の生成について詳しくは、 [マップコンソールから DITA マップの出力を生成します](generate-output-for-a-dita-map.md#).

### ブレンド公開

AEMガイドは、既存のAEMサイト内での DITA コンテンツの公開をサポートしています。 例えば、既存のサイトがある場合、AEM Site の出力を使用して、そのサイトの DITA コンテンツのみを公開できます。 このプロセスでは、既存の DITA 以外のコンテンツは、公開プロセスによって変更されません。 DITA コンテンツのみを公開するサイトの設定について詳しくは、発行管理者に問い合わせてください。

### 公開 `conref`

を使用している場合、 `conref` コンテンツ内では、ソース（または参照）トピック内のコンテンツと共に、通常または埋め込みのコンテンツとしてパブリッシュされます。 The `conref` コンテンツはメインコンテンツと共にレンダリングされ、同じ用に別のサイトページは作成されません。 参照元のコンテンツを検索するとき ( `conref`を選択した場合、 `conref` コンテンツが検索結果に表示されます。

>[!NOTE]
>
>個別のページを `conref` AEM Guide のバージョン 3.5 以前を使用したコンテンツの場合は、 [孤立したサイトページを削除](#delete-orphan-page-aem-site) オプション。


### コンテンツ内の文字列の検索

AEM Site の出力で文字列を検索できます。 デフォルトでは、タイトル内の文字列のみ検索できます。 AEMサイト出力のコンテンツ内または本文内の文字列を検索するには、システム管理者に連絡して flattening.enabled プロパティを有効にしてもらってください。

![AEM Site 出力を検索](images/aem-output-search.png){width="650" align="left"}

詳しくは、 *AEM Site ノード構造の統合を設定* 『 Adobe Experience Managerガイドのインストールと設定』の節を参照してください。

**親トピック：**[&#x200B;出力プリセットの理解](generate-output-understand-presets.md)
